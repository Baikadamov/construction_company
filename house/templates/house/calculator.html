{%extends 'house/base.html'%}
{%load static%}


{%block content%}
<div class="container ">
    <div class="row g-3" style="margin-top: 100px">
        <div class="col-7">
            <div class=" ">
                <h3 class="fw-bold mb-3">Калькулятор расчета стоимости дома (после — отправляйте к нам на просчет)</h3>
                <form action="" method="post">
                    {% csrf_token %}
                    <div class="mb-3 row">
                        <label class="col-sm-6 col-form-label">Количество этажей</label>
                        <div class="col-sm-6">
                            <select class="form-control" name="floor">
                                <option selected value="1 этаж + крыша">1 этаж + крыша</option>
                                <option value="1 этаж + мансардный этаж"> 1 этаж + мансардный этаж</option>
                                <option value="2 этажа + крыша"> 2 этажа + крыша</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-6 col-form-label">Длина строения</label>
                        <div class="col-sm-6">
                            <input type="number" name="length" class="form-control" value="15">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-6 col-form-label">Ширина строения </label>
                        <div class="col-sm-6">
                            <input type="number" name="width" class="form-control" value="15">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-6 col-form-label">Высота 1 этажа</label>
                        <div class="col-sm-6">
                            <select class="form-control" name="length1floor">
                                <option selected value="2.5"> 2.5</option>
                                <option value="2.8">2.8</option>
                                <option value="3">3</option>
                                <option value="3.1">3.1</option>
                                <option value="3.2">3.2</option>
                                <option value="3.3">3.3</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-6 col-form-label">Толщина наружных стен
                        </label>
                        <div class="col-sm-6">
                            <select class="form-control" name="width_of_wall">
                                <option selected value="120"> 120</option>
                                <option value="124">124</option>
                                <option value="170">170</option>
                                <option value="174">174</option>
                                <option value="220">220</option>
                                <option value="224">224</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-6 col-form-label">Общая длина внутренних стен 1 этажа </label>
                        <div class="col-sm-6">
                            <input type="number" value="0" class="form-control" name="general_length">
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-6 col-form-label">Толщина внутренних стен
                        </label>
                        <div class="col-sm-6">
                            <select class="form-control" name="width_of_inner_wall">
                                <option selected value="120"> 120</option>
                                <option value="124">124</option>
                                <option value="170">170</option>
                                <option value="174">174</option>
                                <option value="220">220</option>
                                <option value="224">224</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-6 col-form-label">Толщина чердачного перекрытия
                        </label>
                        <div class="col-sm-6">
                            <select class="form-control" name="width_of_cherdak">
                                <option selected value="120"> 120</option>
                                <option value="124">124</option>
                                <option value="170">170</option>
                                <option value="174">174</option>
                                <option value="220">220</option>
                                <option value="224">224</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-6 col-form-label">Монтаж
                        </label>
                        <div class="col-sm-6">
                            <select class="form-control" name="montazh">
                                <option selected value="Без монтажа">Без монтажа</option>
                                <option value="Полная Сборка">Полная Сборка</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-6 col-form-label">Фундамент
                        </label>
                        <div class="col-sm-6">
                            <select class="form-control" name="fundament">
                                <option selected value="Без Фундамента">Без Фундамента</option>
                                <option value="Винтовые Сваи">Винтовые Сваи</option>
                                <option value="Ленточный фундамент">Ленточный фундамент</option>
                                <option value="Ушп">Ушп</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-6 col-form-label">Окна
                        </label>
                        <div class="col-sm-6">
                            <select class="form-control" name="window">
                                <option value="Без окон" selected>Без окон</option>
                                <option value="Окна ПВХ Белый профиль">Окна ПВХ Белый профиль</option>
                                <option value="Окна ПВХ Темный профиль">Окна ПВХ Темный профиль</option>
                            </select>
                        </div>
                    </div>
                    <div class="mb-3 row">
                        <label class="col-sm-6 col-form-label">Кровля
                        </label>
                        <div class="col-sm-6">
                            <select class="form-control" name="krovlya">
                                <option selected value="Без кровельного покрытия">Без кровельного покрытия</option>
                                <option value="Гибкая черепица">Гибкая черепица</option>
                                <option value="Металлочерепица">Металлочерепица</option>
                            </select>
                        </div>
                    </div>
                    <div class="mt-3  d-flex">
                        <button type="submit" class="btn green ms-auto">
                            Рассчитать
                        </button>
                    </div>
                </form>
            </div>
            {% if total_area %}
            <div class="mt-3 ">
                <p class="text-center">
                    СМЕТА №1
                    ПРЕДВАРИТЕЛЬНАЯ
                    На изготовление комплекта дома из SIP-панелей и сборкой домокомплекта
                </p>
                <table class="table" style="border-collapse: separate; border-spacing: 0 8px;">
                    <tr>
                        <th>Конструкция</th>
                        <th>{{floor}}</th>
                        <th></th>
                    </tr>
                    <tr class="mt-2">
                        <td>Общая площадь</td>
                        <td>{{total_area}}</td>
                        <td> м2</td>
                    </tr>
                    <tr>
                        <td>Длина строения</td>
                        <td>{{length}}</td>
                        <td> метров</td>
                    </tr>
                    <tr>
                        <td>Ширина строения</td>
                        <td>{{width}}</td>
                        <td> метров</td>
                    </tr>
                    <tr>
                        <td>Высота потолка 1-го этажа</td>
                        <td>{{width_of_wall}}</td>
                        <td> метров</td>
                    </tr>
                    <tr>
                        <td>Монтаж</td>
                        <td>{{montazh}}</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Толщина наружных стен</td>
                        <td>{{width_of_wall}}</td>
                        <td> мм</td>
                    </tr>
                    <tr>
                        <td>Площадь наружных стен</td>
                        <td>{{area_out_wall}}</td>
                        <td> м2</td>
                    </tr>
                    <tr>
                        <td>Толщина внутренних стен</td>
                        <td>{{width_of_inner_wall}}</td>
                        <td> мм</td>
                    </tr>
                    <tr>
                        <td>Площадь внутренних стен</td>
                        <td>{{area_inner_wall}}</td>
                        <td> м2</td>
                    </tr>
                    <tr>
                        <td>Толщина чердачного перекрытия</td>
                        <td>{{width_of_cherdak}}</td>
                        <td> мм</td>
                    </tr>
                    <tr>
                        <td>Площадь чердачного перекрытия</td>
                        <td>{{total_area}}</td>
                        <td> м2</td>
                    </tr>
                    <tr>
                        <td>Фундамент
                        </td>
                        <td>{{fundament}}</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Окна ПВХ
                        </td>
                        <td>{{window}}</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Тип кровли
                        </td>
                        <td>{{krovlya}}</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Примерная cтоимость</td>
                        <td>{{total_price}}</td>
                        <td>тенге</td>
                    </tr>
                </table>
            </div>
            <p class="text-center">
                Более точная смета составляется после разработки архитектурно-планировочного и конструктивного решения.
                Возможно изготовление SIP-панелей различной толщины по индивидуальному заказу.
                Контакты:

                +7 (707) 400-8698

                E-mail: info@siphome.kz
            </p>
            {% endif %}
        </div>
        <div class="col-5 ps-5">
            <h5 class=" mt-5 ">Так же вы можете посмотреть готовые проекты</h5>
            {% if projects %}
            {% for p in projects %}
            {% if forloop.counter <= 4 %}
            <div class="card mt-2 house-card">
                <div class="mt-1 p-1 d-flex">
                    <div>
                        <img style="object-fit: cover;height: 100px;width: 100px " src="{{ p.photo_1.url }}" alt="...">
                    </div>
                    <div class="mx-auto p-2">
                        <a href="{% url 'project' p.pk %}"
                           class="card-text text-decoration-none text-dark ">
                            <h6 class="fw-bold">{{p.name}} </h6></a>
                        <p class="card-text fw-lighter">{{p.description|truncatewords:8}}</p>
                    </div>
                </div>
            </div>

            {% endif %}
            {% endfor %}
            {% endif %}
        </div>
    </div>


</div>
{% endblock %}